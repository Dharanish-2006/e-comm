{% extends "base.html" %} {% block content %}

<div class="container mt-5">
  <div class="row">
    <!-- Carousel -->
    <div class="col-md-6">
      <div
        id="productCarousel"
        class="carousel slide shadow rounded"
        data-bs-ride="carousel"
      >
        <!-- Indicators (dots) -->
        <div class="carousel-indicators">
          <button
            type="button"
            data-bs-target="#productCarousel"
            data-bs-slide-to="0"
            class="active"
          ></button>
          {% for img in images %}
          <button
            type="button"
            data-bs-target="#productCarousel"
            data-bs-slide-to="{{ forloop.counter }}"
          ></button>
          {% endfor %}
        </div>

        <div class="carousel-inner">
          <div class="carousel-item active">
            <img
              src="{{ product.image.url }}"
              class="d-block w-100 rounded"
              alt="{{ product.product_name }}"
              style="height:400px; object-fit:cover;"
            />
          </div>
          {% for img in images %}
          <div class="carousel-item">
            <img
              src="{{ img.image.url }}"
              class="d-block w-100 rounded"
              alt="Extra image {{ forloop.counter }}"
              style="height:400px; object-fit:cover;"
            />
          </div>
          {% endfor %}
        </div>

        <!-- Controls -->
        <button
          class="carousel-control-prev"
          type="button"
          data-bs-target="#productCarousel"
          data-bs-slide="prev"
        >
          <span class="carousel-control-prev-icon"></span>
        </button>
        <button
          class="carousel-control-next"
          type="button"
          data-bs-target="#productCarousel"
          data-bs-slide="next"
        >
          <span class="carousel-control-next-icon"></span>
        </button>
      </div>
    </div>

    <!-- Product Info -->
    <div class="col-md-6">
      <h2 class="fw-bold">{{ product.product_name }}</h2>
      <p class="text-muted fs-4">${{ product.price }}</p>
      <p class="mt-3">{{ product.description }}</p>

      <form method="post" action="{% url 'cart' %}">
        {% csrf_token %}
        <input type="hidden" name="product_id" value="{{ product.id }}" />
        <button type="submit" class="btn btn-success btn-lg rounded-pill">
          <i class="bi bi-cart-plus"></i> Add to Cart
        </button>
      </form>
    </div>
  </div>
</div>

{% endblock %}
